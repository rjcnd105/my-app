import { nanoid } from "nanoid";
import { keys } from "./object";
/**
 * @deprecated use `createBuilderMetaData` instead
 */
export function createDataIds(name, parts) {
    return parts.reduce((acc, part) => {
        acc[part] = `data-melt-${name}-${part}`;
        return acc;
    }, {});
}
export function createIds(identifiers) {
    const id = nanoid();
    return Object.keys(identifiers).reduce((acc, key) => {
        acc[key] = `${key}-${id}`;
        return acc;
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
    }, {});
}
export function createBuilderMetadata(name, parts) {
    // TODO: clean this up
    const dataAttrs = createDataIds(name, parts);
    const dataSelectors = keys(dataAttrs).reduce((acc, key) => {
        acc[key] = `[${dataAttrs[key]}]`;
        return acc;
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
    }, {});
    return {
        dataAttrs,
        dataSelectors,
        createIds: () => createIds(dataAttrs),
    };
}
