[tasks.install-lock]
run = "touch mise.lock && mise install"

[tools.node]
version = "latest"

[tools.bun]
version = "latest"

[tools.ruby]
version = "3.4.4"

[tools.java]
version = "temurin-24"

[tools]
"gem:bundler" = "latest"
"gem:cocoapods" = "latest"
"firebase" = "latest"

# ruby 의존성
[tasks.ruby_dependencies_install]
run = "brew install openssl@3 readline libyaml gmp autoconf"

# mise에 watchman이 없으므로
[tasks.install_watchman]
run = "brew install watchman"

[tasks.pod_install]
run = "cd ios && pod install --repo-update && cd .."

[tasks.xcode]
run = "xed ios"

[tasks.ios_cache_clear]
run = """
rm -rf node_modules
npm cache clean --force
npm install
watchman watch-del-all
rm -fr $TMPDIR/haste-map-*
rm -rf $TMPDIR/metro-cache
npx expo prebuild --clear
"""

[env]
JAVA_HOME = { value = "~/.local/share/mise/installs/java/temurin-24/Contents/Home", tools = true }
ANDROID_HOME = { value = "/Users/{{env.USER}}/Library/Android/sdk", tools = true }
_.path = [
  "/Users/{{env.USER}}/Library/Android/sdk/tools",
  "/Users/{{env.USER}}/Library/Android/sdk/tools/bin",
  "/Users/{{env.USER}}/Library/Android/sdk/platform-tools",
]
