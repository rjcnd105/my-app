# 진행 상황

## 작동하는 기능
- **기본 프로젝트 구조**: Elixir/Phoenix 기반 프로젝트 설정 완료
- **Ash Framework 통합**: 기본 리소스 정의 및 액션 구현
- **데이터베이스 연결**: PostgreSQL 데이터베이스 연결 및 스키마 설정
- **기본 UI 구현**: TailwindCSS를 활용한 기본 사용자 인터페이스
- **사용자 인증**: 기본 사용자 등록 및 로그인 기능
- **방 생성 기능**: 정산 방 생성 기본 기능
- **실시간 업데이트**: Phoenix PubSub 및 LiveView를 활용한 실시간 데이터 업데이트

## 구축 중인 기능
- **중첩 폼 검증**: 방 생성 시 참여자 정보 검증 개선
- **정산 항목 관리**: 비용 항목 추가 및 관리 기능
- **정산 계산 알고리즘**: 최적의 정산 방법 계산 로직
- **사용자 알림 시스템**: 정산 관련 알림 기능
- **모바일 최적화**: 반응형 디자인 개선

## 현재 상태
프로젝트는 개발 중기 단계에 있으며, 핵심 기능의 기본 구현은 완료되었습니다. 현재는 Ash Framework와 Phoenix LiveView의 통합 과정에서 발생하는 폼 검증 문제를 해결하는 데 집중하고 있습니다. 특히 중첩된 관계(예: Room과 Payer)에서의 데이터 검증 및 오류 처리 방식을 개선하고 있습니다.

### 주요 마일스톤
- [x] 프로젝트 초기 설정 및 기술 스택 결정
- [x] 기본 데이터 모델 설계 및 구현
- [x] 사용자 인증 시스템 구현
- [x] 방 생성 및 관리 기본 기능 구현
- [ ] 중첩 폼 검증 문제 해결 (현재 작업 중)
- [ ] 정산 항목 관리 기능 구현
- [ ] 정산 계산 알고리즘 구현
- [ ] 사용자 알림 시스템 구현
- [ ] 베타 테스트 및 피드백 수집
- [ ] 프로덕션 배포

## 알려진 문제
1. **중첩 폼 검증 오류 전파**: Ash.Form의 검증 오류가 Phoenix.HTML.Form으로 제대로 전파되지 않음
   - 상태: 해결 중
   - 우선순위: 높음
   - 접근법: transform_errors 옵션 활용 또는 템플릿에서 직접 에러 처리

2. **중복 이름 검증**: 같은 방에 동일한 이름의 참여자가 추가될 때 검증 오류 처리 개선 필요
   - 상태: 해결 중
   - 우선순위: 중간
   - 접근법: 커스텀 검증 함수 구현

3. **LiveView 성능 최적화**: 대규모 데이터셋에서의 LiveView 성능 개선 필요
   - 상태: 조사 중
   - 우선순위: 낮음
   - 접근법: 페이지네이션, 지연 로딩 등 검토

## 프로젝트 결정의 진화

### 기술 스택 선택
- **초기 결정**: Phoenix Framework와 Ecto를 사용한 전통적인 접근법
- **현재 결정**: Ash Framework를 도입하여 도메인 모델링 및 비즈니스 로직 처리 강화
- **이유**: 복잡한 관계 및 비즈니스 규칙을 선언적으로 정의하고 관리하기 위함

### UI 구현 방식
- **초기 결정**: Phoenix 템플릿과 JavaScript를 조합한 전통적인 접근법
- **현재 결정**: Phoenix LiveView를 중심으로 한 서버 기반 실시간 UI
- **이유**: 개발 생산성 향상 및 일관된 사용자 경험 제공

### 데이터 모델링
- **초기 결정**: 단순한 Ecto 스키마 기반 모델링
- **현재 결정**: Ash 리소스 기반 도메인 중심 모델링
- **이유**: 비즈니스 로직과 데이터 모델의 긴밀한 통합, 선언적 관계 정의

### 폼 처리 전략
- **초기 결정**: Phoenix.HTML.Form을 직접 사용
- **현재 결정**: AshPhoenix.Form을 활용한 통합 접근법
- **이유**: Ash 리소스와의 일관된 통합, 강력한 검증 기능 활용
- **도전 과제**: 중첩 폼에서의 오류 처리 개선 필요

## 다음 단계 계획
1. 중첩 폼 검증 문제 해결 (1-2주)
2. 정산 항목 관리 기능 구현 (2-3주)
3. 정산 계산 알고리즘 구현 (2주)
4. 사용자 알림 시스템 구현 (1주)
5. 전체 시스템 테스트 및 버그 수정 (2주)
6. 베타 테스트 준비 및 실행 (3-4주)

## 학습된 교훈
- Ash Framework는 강력하지만 Phoenix와의 통합에는 추가적인 작업이 필요함
- 중첩된 관계에서의 데이터 검증은 초기 설계 단계에서 충분히 고려해야 함
- LiveView는 실시간 기능 구현에 매우 효과적이지만, 복잡한 폼 처리에는 추가적인 패턴이 필요함
- 사용자 경험을 위해서는 명확한 오류 메시지와 안내가 중요함
- 테스트 주도 개발이 복잡한 비즈니스 로직 구현에 큰 도움이 됨
